Проблемы и риски

Фундаментальные SPOF/устойчивость

1. PostgreSQL в единственном экземпляре на ВМ является единой точкой отказа, ограниченные IOPS/коннекты, нет read-replica для отчётных/ночных задач. Любой сбой = простой и потери.

2. Kubernetes в одной зоне доступности - потеря зоны/узла = даунтайм сервисов.

Производительность/латентность

1. ins-product-aggregator делает синхронные запросы ко всем страховщикам и отвечает в рамках одного запроса. При 5-10 интеграциях растёт "длинный хвост" задержек, а один "тормозной" или падающий партнёр портит весь ответ. Риск таймаутов, каскадных отказов.

2. Поллинг каталога: core-app тянет раз в 15 мин, ins-comp-settlement — раз в сутки. Пик-загрузки каждые N минут, "стадный эффект" при рестартах, возможны рассинхронизации и дырки в данных при ошибках интеграции.

3. Страницы медленно грузятся: поисковые запросы (50 RPS) и оформление (10 RPS) упираются в синхронные интеграции и базу, нет горячего кэша/материализованных представлений, вероятно нет connection-pooling.

B2B-SLA

1. Партнёры бьют напрямую в Kubernetes LoadBalancer — нет централизованных квот, rate-limit. Один партнёр уже давал ~250 RPS (вместо 20 RPS) и "съедал" все CPU/коннекты.


Надёжность интеграций

1. Нет явных bulkhead/circuit-breaker/timeout/ретраев с джиттером по внешним страховым API, один падающий запрос блокирует весь агрегатор и цепочку.

2. Ночные REST-выгрузки оформленных полисов из core-app в ins-comp-settlement уязвимы: длинные запросы, таймауты, "повторы - дубли".

Операционная готовность

1. Инциденты узнаются от пользователей - нет SLO/алёртов/зондов/трассировок, дорогостоящие простои, слабая видимость причин.
